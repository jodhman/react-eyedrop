!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("html2canvas"),require("get-canvas-pixel-color"),require("react")):"function"==typeof define&&define.amd?define(["exports","html2canvas","get-canvas-pixel-color","react"],t):t((e=e||self)["react-eyedrop"]={},e.html2canvas,e.getCanvasPixelColor,e.React)}(this,function(e,I,A,W){"use strict";I=I&&I.hasOwnProperty("default")?I.default:I,A=A&&A.hasOwnProperty("default")?A.default:A;var N="default"in W?W.default:W;function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function g(e){var t=e.x,r=e.y,n=e.targetHeight,o=e.targetWidth,a=e.canvasHeight,c=e.canvasWidth,i=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach(function(e){H(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},e);return t<0&&(i.x=0),r<0&&(i.y=0),c<t+o&&(i.targetWidth=c-t),a<r+n&&(i.targetHeight=a-r),i}function M(e,t,r,n){return function(e,t,r,n,o){if(!e.getContext)throw y;for(var a=e.getContext("2d"),c=g({x:t,y:r,targetHeight:o,targetWidth:n,canvasHeight:e.height,canvasWidth:e.width}),i=a.getImageData(c.x,c.y,c.targetWidth,c.targetHeight).data,u=[],f=0;f<i.length;f+=4){var s=L(i.slice(f,f+4),3),l=s[0],d=s[1],p=s[2];u.push({r:l,g:d,b:p})}return u}(e,r-t,n-t,2*t,2*t)}function B(e){var t=e.toString(16);return t.length<2&&(t="0".concat(t)),t}var t={notArrayOfRgbObj:"calcAverageColor: only accepts array of colors",noPixelsFound:"calcAverageColor: 0 pixels found"},r={elementNotCanvas:"getCanvasBlockColors: element is not of type canvas"},n={targetNotImg:"imageToCanvas: event target not of node type img"},T=new Error({pickRadiusOutOfBounds:"Property `pickRadius` out of bounds: please choose a value between 0 - 450."}.pickRadiusOutOfBounds),_=new Error(n.targetNotImg),q=new Error(t.notArrayOfRgbObj),F=new Error(t.noPixelsFound),y=new Error(r.elementNotCanvas),X={eyedropperWrapper:{position:"relative"},eyedropperWrapperButton:{backgroundColor:"#000000",color:"#ffffff",border:"1px solid #ffffff",borderRadius:"20%",padding:"10px 25px"}},Y={rgb:"",hex:""};e.EyeDropper=function(o){function r(e,t,r){document.body&&(document.body.style.cursor=r?h:m),f(e),p(t)}function e(){var e=o.onPickStart,t=o.disabled;e&&e(),r(!0,t||!0,!0)}function l(){return r(!1,!1,!1)}function t(e){var t=e.target;if("img"===e.target.nodeName.toLowerCase()){var r=e.offsetX,n=e.offsetY,o=function(e){if("IMG"!==e.nodeName)throw _;var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0,e.width,e.height),t}(t),a=A(o,r,n),c=a.r,i=a.g,u=a.b;return w({r:c,g:i,b:u}),void(!0===y&&l())}var f=e.offsetX,s=e.offsetY;I(t,{logging:!1}).then(function(e){if(void 0===v||0===v){var t=A(e,f,s),r=t.r,n=t.g,o=t.b;w({r:r,g:n,b:o})}else{var a=function(e){var r=e.length;if("object"!==R(e)||void 0===e.reduce)throw q;if(0===r)throw F;if(1===r)return e[0];var t=e.reduce(function(e,t){return e[0]+=Math.round(t.r/r),e[1]+=Math.round(t.g/r),e[2]+=Math.round(t.b/r),e},[0,0,0]);return{r:t[0],g:t[1],b:t[2]}}(M(e,v,f,s));w(a)}}),!0===y&&l()}var n=L(W.useState(Y),2),a=n[0],c=n[1],i=L(W.useState(!1),2),u=i[0],f=i[1],s=L(W.useState(!1),2),d=s[0],p=s[1],g=o.once,y=void 0===g||g,b=o.pickRadius,v=void 0===b?0:b,h=o.cursorActive?o.cursorActive:"copy",m=o.cursorInactive?o.cursorInactive:"auto",O=W.useCallback(function(e){return 27===e.keyCode&&r(!1,!1,!1)},[]),w=function(e){var t=o.onChange,r=function(e){var t=e.r,r=e.g,n=e.b;return"rgb(".concat(t,", ").concat(r,", ").concat(n,")")}(e),n=function(e){var t=e.r,r=e.g,n=e.b,o=B(t),a=B(r),c=B(n);return"#".concat(o).concat(a).concat(c)}(e);t({rgb:r,hex:n,customProps:k}),c({rgb:r,hex:n})};W.useEffect(function(){var e=o.onInit;e&&e(),v&&function(e){if(e<0||450<e)throw T}(v)},[]),W.useEffect(function(){return u&&document.addEventListener("click",t),function(){(y||u)&&document.removeEventListener("click",t)}},[u,y]),W.useEffect(function(){return document.addEventListener("keydown",O),function(){document.removeEventListener("keydown",O)}},[O]);var x=o.wrapperClasses,j=o.buttonClasses,C=o.customComponent,E=o.colorsPassThrough,P=o.children,k=o.customProps,S=E?H({},E,a):{};return N.createElement("div",{style:X.eyedropperWrapper,className:x},C?N.createElement(C,D({onClick:e},S,{customProps:k,disabled:d})):N.createElement(N.Fragment,null,N.createElement("style",{dangerouslySetInnerHTML:{__html:"\n            .react-eyedrop-button {\n              background-color: #000000;\n              color: #ffffff;\n              border: 1px solid #ffffff;\n              border-radius: 20%;\n              padding: 10px 25px;\n            }\n          "}}),N.createElement("button",{id:"react-eyedrop-button",className:"react-eyedrop-button ".concat(j||""),onClick:e,disabled:d},P)))},Object.defineProperty(e,"__esModule",{value:!0})});
